@{
    ViewBag.Title = "Calendar";
}

@section Styles{
    <environment include="development">
            <link href="~/lib/fullcalendar/main.css" rel="stylesheet" />
            <script src="~/lib/fullcalendar/main.js"></script>
    </environment>
    <link href="~/css/calendar.css" rel="stylesheet">
}

<div class="col-12 pt-2 bg-light" id="calendar-main">
    <div class="row" style="height:94vh;">
        <div class="col-12 col-md-3 h-100">
            <div class="border border-dark">
                <div class="col-12 my-2">
                <h4>Appointments</h4>
                </div>
                <div class="col-12 my-2">
                    <div class="">Filter by Surgeon:</div>
                    <select v-model="selectedSurgeonId" id="appointmentFilter" name="surgeonFilter" 
                            class="w-100 btn dropdown-toggle border border-dark">
                        <option value="-1" selected hidden>Choose...</option>
                        <option v-for="option in getSurgeons" v-bind:value="option.id">
                            {{ option.name }}
                        </option>
                    
                    </select>
                </div>
                <div class="col-12">
                    <div class="row">
                        <div class="col-6 my-2">
                            <button v-on:click="renderAppoinmentsTable" class="w-100 btn btn-info">View Table</button>
                        </div>
                        <div class="col-6 my-2">
                            <button v-on:click="createSchedule" class="w-100 btn btn-primary">Create Schedule</button>
                        </div>
                    </div>
                </div>
            </div>
            <div class="my-2 border border-dark">
                <div class="col-12 my-2">
                <h4>Calendars</h4>
                </div>
                <div class="col-12 my-2">
                    <div class="">Filter By:</div>
                    <select v-model="selectedFilter" id="calendarFilter" name="calendarFilter" 
                            class="w-100 btn dropdown-toggle border border-dark">
                        <option value="" selected hidden>Choose...</option>
                        <option v-for="option in filters" v-bind:value="option.value">
                            {{ option.text }}
                      </option>
                    
                    </select>
                </div>
                <div class="col-12 my-2"> 
                    <div class="">Select {{getSelectedFilterText}}:</div>
                    <select v-model="selectedFilterValue" class="w-100 btn dropdown-toggle border border-dark" 
                        id="filterValuesDropDown" disabled>
                        <option value="-1" selected hidden>Choose...</option>
                      <option v-for="option in getFilterValueOptions" v-bind:value="option.id">
                        {{ option.name }}
                      </option>
                    </select>
                </div>
                <div class="col-12 my-2">
                    <button v-on:click="renderCalendar" class="mx-auto btn btn-info">Get Calendar</button>
                </div>
            </div>
            <div class="my-2 border border-dark" v-if="null != getSelectedEvent">
                <div class="col-12 my-2">
                    <h4>Appointment Details</h4>
                </div>
                <div class="col-12">
                    <div class="my-2">Surgeon : {{getSelectedEvent.surgeon}}</div>
                    <div class="my-2">Patient : {{getSelectedEvent.patient}}</div>
                    <div class="my-2">Surgery : {{getSelectedEvent.surgery}}</div>
                    <div class="my-2">Theatre : {{getSelectedEvent.theatre}}</div>
                    <div class="my-2">Start Time : {{getSelectedEvent.startTime}}</div>
                    <div class="my-2">Duration : {{getSelectedEvent.duration}}</div>
                    <div class="my-2">End Time : {{getSelectedEvent.endTime}}</div>

                    <div class="my-2">Priority : 
                        <span v-if="getSelectedEvent.priority == 0" class="text-success">Low</span>
                        <span v-else-if="getSelectedEvent.priority == 1" class="text-warning">Medium</span>
                        <span v-else-if="getSelectedEvent.priority == 2" class="text-danger">High</span>
                    </div>
                </div>
            </div>
        </div>
        <div class="col-12 col-md-9 logo-bg " id="right-side" >
            <div id="appointments-table" style="display:none;">
                <div class="table table-bordered">
                    <div>
                        <table class="table">
                            <thead class="thead-light">
                               <tr>
                                  <th scope="col">Appointment Id</th>
                                  <th scope="col">PatientId</th>
                                  <th scope="col">Patient</th>
                                  <th scope="col">SurgeonId</th>
                                  <th scope="col">Surgeon</th>
                                  <th scope="col">SurgeryTypeId</th>
                                  <th scope="col">SurgeryType</th>
                                  <th scope="col">Handle</th>
                                  <th scope="col">ApproximateProcedureDate</th>
                                  <th scope="col">ComplicationPossibility</th>
                                  <th scope="col">TheatreTypeId</th>
                                  <th scope="col">TheatreType</th>
                                  <th scope="col">TheatreId</th>
                                  <th scope="col">Theatre</th>
                                  <th scope="col">PriorityLevel</th>
                                  <th scope="col">Priority</th>
                                  <th scope="col">AnesthesiaType</th>
                                  <th scope="col">SystemPredictedDuration</th>
                                  <th scope="col">SurgeonsPredictedDuration</th>
                                  <th scope="col">Status</th>
                                  <th scope="col">DateAdded</th>
                                  <th scope="col">ScheduledSurgeryId</th>
                                  <th scope="col">ScheduledSurger</th>
                              </tr>
                         </thead>
                      </table>
                    </div>
                </div>
            </div>
            <div id="calendar" style="display:none;"></div>
        </div>
    </div>
</div>

@section Scripts{
    <script defer src="~/lib/vue/dist/vue.global.js"></script>
    <script defer src="~/js/calendar/calendar-requests.js"></script>
    <script defer src="~/js/calendar/calendar.js"></script>
    <script defer src="~/js/calendar/calendar-vue-app.js"></script>
    <script defer src="~/js/calendar/calendar-main.js"></script>
}